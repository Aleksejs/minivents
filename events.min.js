function Events(){var events={},slice=Array.prototype.slice;return{on:function(e,t,n){var r=events[e]||(events[e]=[]);r.push({f:t,context:n})},off:function(type,func){var list=events[type],copy=slice.call(events[type]),i,j;if(!func)return delete events[type];for(i=0,j=list.length;i<j;i++){with(list[i]){if(func===f)copy.splice(i,1)}}events[type]=copy},trigger:function(e,t){if(!events[e])return false;if(t&&!(t instanceof Array))t=[t];var n=events[e],r,i;for(r=0,i=n.length;r<i;r++){n[r].f.apply(n[r].context,t)}}}}
